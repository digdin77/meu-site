import React, { useState } from "react";
import { motion } from "framer-motion";

export default function FinanceBot() {
  const [messages, setMessages] = useState([
    { type: "bot", text: "Bem-vindo ao Bot Financeiro! ğŸ’°" },
    { type: "bot", text: 'Digite um gasto como: "ifood 44" para testar!' },
  ]);
  const [input, setInput] = useState("");

  const handleSend = () => {
    if (!input.trim()) return;
    const userMessage = { type: "user", text: input };
    setMessages((prev) => [...prev, userMessage]);
    setTimeout(() => {
      const botResponse = { type: "bot", text: `Gasto adicionado: ${input}` };
      setMessages((prev) => [...prev, botResponse]);
    }, 1000);
    setInput("");
  };

  const handleKeyPress = (e) => {
    if (e.key === "Enter") {
      handleSend();
    }
  };

  return (
    <div style={{ backgroundColor: "#121212", color: "white", minHeight: "100vh", padding: "20px" }}>
      <div style={{ maxWidth: "400px", margin: "0 auto", backgroundColor: "#2C2C2C", padding: "10px", borderRadius: "8px" }}>
        <div style={{ marginBottom: "10px", fontSize: "18px", fontWeight: "bold" }}>Bot Financeiro</div>
        <div style={{ maxHeight: "300px", overflowY: "auto", marginBottom: "10px" }}>
          {messages.map((message, index) => (
            <motion.div
              key={index}
              initial={{ opacity: 0, y: 10 }}
              animate={{ opacity: 1, y: 0 }}
              style={{
                backgroundColor: message.type === "bot" ? "#444" : "#1E90FF",
                color: message.type === "bot" ? "white" : "black",
                padding: "10px",
                margin: "5px 0",
                borderRadius: "8px",
                alignSelf: message.type === "bot" ? "flex-start" : "flex-end",
              }}
            >
              {message.text}
            </motion.div>
          ))}
        </div>
        <div style={{ display: "flex", gap: "10px" }}>
          <input
            type="text"
            value={input}
            onChange={(e) => setInput(e.target.value)}
            onKeyPress={handleKeyPress}
            placeholder="Digite sua mensagem..."
            style={{
              flex: 1,
              padding: "10px",
              borderRadius: "8px",
              border: "1px solid #444",
              backgroundColor: "#222",
              color: "white",
            }}
          />
          <button
            onClick={handleSend}
            style={{
              backgroundColor: "#1E90FF",
              color: "white",
              border: "none",
              borderRadius: "8px",
              padding: "10px",
              cursor: "pointer",
            }}
          >
            Enviar
          </button>
        </div>
      </div>
    </div>
  );
}
